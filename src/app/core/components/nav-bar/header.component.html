<ng-container *ngIf="!isCheckoutPage; else checkoutNavBar">
  <header class="header">
    <div class="layout">
      <div class="header__main">
        <div class="header__items m-width">

          <div class="header__item_left">
            <!--<div class="header__item-icon">-->
              <button class="search__submit" (click)="toggleMenu()">
                <mat-icon>menu</mat-icon>
              </button>
            <!--</div>-->
          </div>

          <div class="header__item_left">
            <div class="header__item-icon">
              <div >
                <!--<i class="pi pi-search header__icon-internal" (click)="toggleSearch()"></i>-->
                <button class="search__submit" (click)="toggleSearch()">
                  <mat-icon>search</mat-icon>
                </button>
              </div>
            </div>
            <div class="header__item-body">
              <form [formGroup]="searchForm" class="search" [ngClass]="{'is-active': isSearchActive}">
                <button type="button" class="search__submit">
                  <mat-icon>search</mat-icon>
                </button>
                <input class="search__input" type="text" placeholder="Search by product name" formControlName="search">
                <button type="button" class="search__reset" (click)="toggleSearch()">
                  <mat-icon>close</mat-icon>
                </button>
              </form>
            </div>
          </div>

        </div>
        <!-------------------------------------->
        <div class="header__logo">
          <a class="logo" href="/">
            <img src="assets/images/MainLogo2.png" alt="moda_logo"
                 title="moda_logo" class="logo__image">
          </a>
        </div>
        <!-------------------------------------->
        <div class="header__items">
          <!-------------------A------------------>
          <ng-container *ngIf="(currentUser$ | async) === null">

            <div class="header__item_left">
              <div class="header__item-icon align-r">
                <a [routerLink]="['/wishlist/']">
                  <ng-container
                    *ngIf="
                    (products$ | async)?.length === 0 ||
                    (products$ | async)?.length === undefined ||
                    (products$ | async)?.length === null;
                    else noValueIconW"
                  >
                    <i class="pi pi-heart header__icon-internal" size="large"></i>
                  </ng-container>
                  <ng-template #noValueIconW>
                    <i class="pi pi-heart header__icon-internal"
                       pBadge value="{{(products$ | async)?.length || null}}"
                       severity="success"
                       size="large">
                    </i>
                  </ng-template>
                </a>
              </div>
            </div>

            <div class="header__item_left">
              <div class="header__item-icon align-r">
                <a (click)="openDialog()">
                  <ng-container
                    *ngIf="
                    (basket$ | async)?.items?.length === 0 ||
                    (basket$ | async)?.items?.length === undefined ||
                    (basket$ | async)?.items?.length === null;
                    else noValueIcon"
                  >
                    <i class="pi pi-shopping-bag header__icon-internal" size="large"></i>
                  </ng-container>
                  <ng-template #noValueIcon>
                    <i class="pi pi-shopping-bag header__icon-internal"
                       pBadge value="{{(basket$ | async)?.items?.length || null}}"
                       severity="success"
                       size="large">
                    </i>
                  </ng-template>
                </a>
              </div>
            </div>

            <div class="header__item_left">
              <div class="header__item-icon align-r">
                <a (click)="openLoginModal()" class="s-hamb">
                  <i class="pi pi-user header__icon-internal" size="large"></i>
                </a>
<!--                <div class="header__item-menu">-->
<!--                  <div class="user-nav">-->
<!--                    <div class="user-nav__body">-->
<!--                      <span class="user-nav__name">-->
<!--                        <svg class="user-nav__icon" xmlns="http://www.w3.org/2000/svg" height="1em" viewBox="0 0 512 512"><path d="M464 256A208 208 0 1 0 48 256a208 208 0 1 0 416 0zM0 256a256 256 0 1 1 512 0A256 256 0 1 1 0 256zm177.6 62.1C192.8 334.5 218.8 352 256 352s63.2-17.5 78.4-33.9c9-9.7 24.2-10.4 33.9-1.4s10.4 24.2 1.4 33.9c-22 23.8-60 49.4-113.6 49.4s-91.7-25.5-113.6-49.4c-9-9.7-8.4-24.9 1.4-33.9s24.9-8.4 33.9 1.4zM144.4 208a32 32 0 1 1 64 0 32 32 0 1 1 -64 0zm192-32a32 32 0 1 1 0 64 32 32 0 1 1 0-64z"/></svg>-->
<!--                        {{(currentUser$ | async)?.displayName}}-->
<!--                      </span>-->
<!--                      <a routerLink="/account/user-information" class="user-nav__link">-->
<!--                        <svg class="user-nav__icon" xmlns="http://www.w3.org/2000/svg" height="1em" viewBox="0 0 512 512">&lt;!&ndash;! Font Awesome Free 6.4.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license (Commercial License) Copyright 2023 Fonticons, Inc. &ndash;&gt;<path d="M24 32C10.7 32 0 42.7 0 56V456c0 13.3 10.7 24 24 24H40c13.3 0 24-10.7 24-24V56c0-13.3-10.7-24-24-24H24zm88 0c-8.8 0-16 7.2-16 16V464c0 8.8 7.2 16 16 16s16-7.2 16-16V48c0-8.8-7.2-16-16-16zm72 0c-13.3 0-24 10.7-24 24V456c0 13.3 10.7 24 24 24h16c13.3 0 24-10.7 24-24V56c0-13.3-10.7-24-24-24H184zm96 0c-13.3 0-24 10.7-24 24V456c0 13.3 10.7 24 24 24h16c13.3 0 24-10.7 24-24V56c0-13.3-10.7-24-24-24H280zM448 56V456c0 13.3 10.7 24 24 24h16c13.3 0 24-10.7 24-24V56c0-13.3-10.7-24-24-24H472c-13.3 0-24 10.7-24 24zm-64-8V464c0 8.8 7.2 16 16 16s16-7.2 16-16V48c0-8.8-7.2-16-16-16s-16 7.2-16 16z"/></svg>-->
<!--                        Personal data-->
<!--                      </a>-->
<!--                      <a routerLink="/account/orders" class="user-nav__link">-->
<!--                        <svg class="user-nav__icon" xmlns="http://www.w3.org/2000/svg" height="1em" viewBox="0 0 448 512">&lt;!&ndash;! Font Awesome Free 6.4.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license (Commercial License) Copyright 2023 Fonticons, Inc. &ndash;&gt;<path d="M438.6 105.4c12.5 12.5 12.5 32.8 0 45.3l-256 256c-12.5 12.5-32.8 12.5-45.3 0l-128-128c-12.5-12.5-12.5-32.8 0-45.3s32.8-12.5 45.3 0L160 338.7 393.4 105.4c12.5-12.5 32.8-12.5 45.3 0z"/></svg>-->
<!--                        Orders-->
<!--                      </a>-->
<!--                      <a (click)="exit()" class="user-nav__link">-->
<!--                        <svg class="user-nav__icon" xmlns="http://www.w3.org/2000/svg" height="1em" viewBox="0 0 512 512">&lt;!&ndash;! Font Awesome Free 6.4.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license (Commercial License) Copyright 2023 Fonticons, Inc. &ndash;&gt;<path d="M502.6 278.6c12.5-12.5 12.5-32.8 0-45.3l-128-128c-12.5-12.5-32.8-12.5-45.3 0s-12.5 32.8 0 45.3L402.7 224 192 224c-17.7 0-32 14.3-32 32s14.3 32 32 32l210.7 0-73.4 73.4c-12.5 12.5-12.5 32.8 0 45.3s32.8 12.5 45.3 0l128-128zM160 96c17.7 0 32-14.3 32-32s-14.3-32-32-32L96 32C43 32 0 75 0 128L0 384c0 53 43 96 96 96l64 0c17.7 0 32-14.3 32-32s-14.3-32-32-32l-64 0c-17.7 0-32-14.3-32-32l0-256c0-17.7 14.3-32 32-32l64 0z"/></svg>-->
<!--                        Logout-->
<!--                      </a>-->
<!--                    </div>-->
<!--                  </div>-->
<!--                </div>-->
              </div>
            </div>

          </ng-container>
          <!-------------------B------------------>
          <ng-container *ngIf="currentUser$ | async">

            <!--<div class="header__item_left">
              <div class="header__item-icon ">
                <a href="" class="s-hamb">
                  <i class="pi pi-envelope  header__icon-internal" pBadge value="2" severity="success" size="large"
                     ></i>
                </a>
              </div>
            </div>-->

            <div class="header__item_left">
              <div class="header__item-icon ">
                <a [routerLink]="['/wishlist/']">
                  <ng-container
                    *ngIf="
                    (products$ | async)?.length === 0 ||
                    (products$ | async)?.length === undefined ||
                    (products$ | async)?.length === null;
                    else noValueIconW"
                  >
                    <i class="pi pi-heart header__icon-internal" size="large"></i>
                  </ng-container>
                  <ng-template #noValueIconW>
                    <i class="pi pi-heart header__icon-internal"
                       pBadge value="{{(products$ | async)?.length || null}}"
                       severity="success"
                       size="large">
                    </i>
                  </ng-template>
                </a>
              </div>
            </div>

            <div class="header__item_left">
              <div class="header__item-icon ">
                <a (click)="openDialog()">
                  <ng-container *ngIf="(basket$ | async)?.items.length !== 0; else noValueIcon">
                    <i class="pi pi-shopping-bag header__icon-internal"
                       pBadge
                       value="{{(basket$ | async).items.length}}"
                       severity="success"
                       size="large">
                    </i>
                  </ng-container>
                  <ng-template #noValueIcon>
                    <ng-container *ngIf="!(basket$ | async)?.items.length || (basket$ | async)?.items.length === null || (basket$ | async)?.items.length === undefined || (basket$ | async)?.items.length === 0">
                      <i class="pi pi-shopping-bag header__icon-internal" size="large"></i>
                    </ng-container>
                  </ng-template>
                </a>
              </div>
            </div>

            <div class="header__item_left">
              <div class="header__item-icon align-r">
                <a class="s-hamb">
                  <i class="pi pi-user header__icon-internal" size="large"></i>
                </a>
                <div class="header__item-menu">
                  <div class="user-nav">
                    <div class="user-nav__body">
                      <span class="user-nav__name">
                        <svg class="user-nav__icon" xmlns="http://www.w3.org/2000/svg" height="1em" viewBox="0 0 512 512"><path d="M464 256A208 208 0 1 0 48 256a208 208 0 1 0 416 0zM0 256a256 256 0 1 1 512 0A256 256 0 1 1 0 256zm177.6 62.1C192.8 334.5 218.8 352 256 352s63.2-17.5 78.4-33.9c9-9.7 24.2-10.4 33.9-1.4s10.4 24.2 1.4 33.9c-22 23.8-60 49.4-113.6 49.4s-91.7-25.5-113.6-49.4c-9-9.7-8.4-24.9 1.4-33.9s24.9-8.4 33.9 1.4zM144.4 208a32 32 0 1 1 64 0 32 32 0 1 1 -64 0zm192-32a32 32 0 1 1 0 64 32 32 0 1 1 0-64z"/></svg>
                        {{(currentUser$ | async)?.displayName}}
                      </span>
                      <a routerLink="/account/user-information" class="user-nav__link">
                        <mat-icon>account_circle</mat-icon>
                        Personal info
                      </a>
                      <a routerLink="/account/user-information" class="user-nav__link">
                        <mat-icon>visibility</mat-icon>
                        Seen
                      </a>
                      <a routerLink="/account/orders" class="user-nav__link">
                        <mat-icon>shopping_cart</mat-icon>
                        Orders
                      </a>
                      <a routerLink="/account/reviews" class="user-nav__link">
                        <mat-icon>mark_chat_read</mat-icon>
                        Reviews
                      </a>
                      <a routerLink="/account/settings" class="user-nav__link">
                         <mat-icon>settings</mat-icon>
                        Settings
                      </a>
                      <a (click)="exit()" class="user-nav__link">
                        <mat-icon>logout</mat-icon>
                        Logout
                      </a>
                    </div>
                  </div>
                </div>
              </div>
            </div>

          </ng-container>


        </div>
      </div>
      <!--<ng-container (click)="toggleMenu()">-->
      <div [@fastCascade]="(searchResults$ | async)?.data?.length">
        <app-product-list-item
          *ngFor="let result of (searchResults$ | async)?.data"
          [product]="result">
        </app-product-list-item>
      </div>
        <app-nav-modal [isMenuActive]="isMenuActive"></app-nav-modal>
      <!--</ng-container>-->
    </div>
  </header>
</ng-container>



<ng-template #checkoutNavBar>
  <header class="checkout-header">
    <div class="layout">
      <div class="checkout-header__inner">
        <div class="checkout-header__main">
          <div class="checkout-header__logo">
          <a class="logo" href="/">
            <!--<img src="https://uploads.shafastatic.net/uploads/2022/Jul/ic_shafa_logo_zDK2Rl4.svg" alt="shafa_logo"
                 title="shafa_logo" class="this-image">-->
            <img src="assets/images/MainLogo2.png" alt="moda_logo"
                 title="shafa_logo" class="logo__image">
          </a>
        </div>
        </div>
      </div>
    </div>
  </header>
</ng-template>
<p-toast></p-toast>
<p-confirmDialog [style]="{width: '50vw'}"></p-confirmDialog>


